system:
  symbol: EURUSD
  symbols: [EURUSD]
  data_dir: data
  base_timeframe: M1  # 1-minute base for multi-timeframe analysis
  use_volume_features: false
  higher_timeframes: [M3, M5, M15, M30, H1, H2, H4, D1, W1, MN1]
  history_years: 10
  trading_session_start: "00:05"
  trading_session_end: "23:55"
  session_timezone: UTC
  broker_backend: mt5_local
  mt5_required: false  # Set true for live trading on Windows
  mt5_terminal_path: 'C:\Program Files\MetaTrader 5\terminal64.exe'
  mt5_login: 0
  mt5_password: ""
  mt5_server: ""
  mt5_timeout_seconds: 30
  poll_interval_seconds: 60
  metrics_logging_enabled: true
  metrics_db_path: metrics.sqlite
  risk_ledger_enabled: true
  risk_ledger_max_events: 1000
  strategy_ledger_path: strategy_ledger.sqlite
  enable_dashboard: true
  cache_enabled: true
  cache_dir: cache
  cache_max_age_minutes: 0
  deep_purge_mode: "all"  # Enable full purge for institutional training
  deep_purge_on_train: true
  # Hardware is detected automatically (CPU/GPU/RAM)
  # Set preference to "auto", "true" (force GPU), or "false" (force CPU)
  enable_gpu_preference: auto

risk:
  initial_balance: 10000  # Fallback used when MT5 balance unavailable
  min_risk_per_trade: 0.005
  max_risk_per_trade: 0.030
  risk_per_trade: 0.015
  daily_drawdown_limit: 0.04
  total_drawdown_limit: 0.07
  min_risk_reward: 2.0
  spread_guard_multiplier: 2.5
  slippage_guard_multiplier: 2.0
  challenge_mode: true
  challenge_phase: phase_1
  prop_firm_rules: true
  max_daily_risk_pct: 0.04
  base_risk_per_trade: 0.01
  daily_risk_budget: 0.040
  consistency_tracking: true
  min_confidence_threshold: 0.55
  kill_zones_enabled: true
  enhanced_features: true
  uncertainty_quantification: true
  max_trades_per_day: 8
  daily_profit_stop_pct: 0.0
  high_quality_confidence: 0.65
  high_quality_risk_pct: 0.030
  high_quality_rr: 2.0
  atr_period: 14
  atr_stop_multiplier: 1.5
  triple_barrier_max_bars: 35
  trailing_enabled: true
  trailing_atr_multiplier: 1.0
  trailing_be_trigger_r: 1.0
  kelly_lambda: 1.0
  slippage_pips: 0.5
  commission_per_lot: 7.0
  backtest_spread_pips: 1.5
  cost_penalty_r: 0.0
  gate_trade_prob: 0.55
  daily_hard_stop_pct: 0.04
  conformal_alpha: 0.10
  volatility_stop_sigma: 0.02
  volatility_lookback: 50
  meta_label_tp_pips: null
  meta_label_sl_pips: null
  meta_label_max_hold_bars: 100
  meta_label_min_prob_threshold: 0.55
  meta_label_min_dist: 0.0005
  meta_label_fixed_sl: 0.0020
  meta_label_fixed_tp: 0.0040
  # Stop/target engine (unsupervised blend of volatility + tail risk)
  stop_target_mode: blend
  vol_estimator: ensemble  # ensemble | yang_zhang | garman_klass | parkinson | rogers_satchell | ewma
  vol_ensemble_weights:
    yang_zhang: 1.0
    garman_klass: 1.0
    rogers_satchell: 1.0
    parkinson: 1.0
  vol_window: 50
  ewma_lambda: 0.94
  ewma_lambda_by_timeframe:
    M1: 0.90
    M5: 0.92
    M15: 0.94
    M30: 0.95
    H1: 0.96
    H4: 0.97
    D1: 0.98
    W1: 0.985
    MN1: 0.99
  vol_horizon_bars: 5
  tail_window: 100
  tail_alpha: 0.975
  tail_step: 5
  tail_max_bars: 300000
  stop_k_vol: 1.0
  stop_k_tail: 1.25
  rr_trend: 2.5
  rr_range: 1.5
  rr_neutral: 2.0
  regime_adx_trend: 25.0
  regime_adx_range: 20.0
  hurst_window: 100
  hurst_trend: 0.55
  hurst_range: 0.45

models:
  ml_models: [lightgbm, xgboost, catboost, random_forest, extra_trees]
  use_rl_agent: true
  use_sac_agent: true
  use_neuroevolution: true
  rl_population_size: 5
  rl_timesteps: 100000
  rl_eval_episodes: 15
  rl_network_arch: [256, 256]
  rl_parallel_envs: 1
  rl_train_seconds: 36000
  evo_train_seconds: 36000
  evo_hidden_size: 64
  evo_population: 32
  evo_islands: 4
  train_batch_size: 32
  inference_batch_size: 32
  enable_transformer_expert: true
  transformer_heads: 8
  transformer_layers: 4
  transformer_hidden_dim: 256
  transformer_dropout: 0.10
  transformer_seq_len: 64
  transformer_train_seconds: 36000
  nbeats_train_seconds: 36000
  tide_train_seconds: 36000
  tabnet_train_seconds: 36000
  kan_train_seconds: 36000
  num_transformers: 2
  hpo_backend: ax
  hpo_trials: 0  # 0 = use default trial count
  hpo_max_rows: 500000
  ray_tune_max_concurrency: 1
  export_onnx: true  # Export ONNX for fast CPU inference (one-time at startup if missing)
  phase5_filter_meta_blender: true
  phase5_core_models: [transformer, nbeats, tide, tabnet, kan]
  prop_metric_weight: 1.0
  prop_accuracy_weight: 0.1
  prop_min_trades: 0
  prop_conf_threshold: 0.55
  walkforward_splits: 20  # time-based walk-forward splits for OOS validation
  embargo_minutes: 120
  # CPCV (Combinatorial Purged Cross-Validation) settings
  enable_cpcv: true
  cpcv_n_splits: 5
  cpcv_n_test_groups: 2
  cpcv_embargo_pct: 0.01
  cpcv_purge_pct: 0.02
  cpcv_min_phi: 0.80

news:
  news_model: tfidf_linear
  news_model_path: models/news_nlp.joblib
  news_decay_minutes: 120
  news_kill_window_min: 30
  news_confidence_threshold: 0.65
  news_calendar_enabled: true
  news_calendar_source: forexfactory
  news_lookahead_minutes: 60
  news_trade_on_event: true
  news_trade_confidence_threshold: 0.90
  news_event_risk_pct: 0.001  # minimal risk per event (0.1%)
  enable_news: true
  news_sources: [rss] 
  rss_feeds: 
    - https://www.forexfactory.com/ffcal_week_this.xml
    - https://www.dailyfx.com/feeds/market-news
  news_local_glob: ""
  news_backfill_enabled: true
  news_backfill_days: 0  # 0 = full data span
  enable_llm_helper: true
  llm_helper_enabled: true
  openai_model: "gpt-5-nano-2025-08-07"
  openai_max_tokens: 1000
